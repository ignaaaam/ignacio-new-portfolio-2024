---
import { getLangFromUrl } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);

import SpanishFlag from "../components/icons/SpanishFlag.astro";
import EnglishFlag from "../components/icons/EnglishFlag.astro";
---

<div
  class="flex items-center space-x-1 md:mt-0 md:order-2 md:space-x-0 rtl:space-x-reverse"
>
  {
    lang === "es" ? (
      <button
      type="button" data-dropdown-toggle="language-dropdown-menu"
        class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-colors"
      >
        <SpanishFlag />
        Spanish (ES)
      </button>
    ) : (
      <a data-astro-reload
        data-dropdown-toggle="language-dropdown-menu"
        class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-colors"
        role="menuitem"
      >
        <div class="inline-flex items-center">
          <EnglishFlag />
          English (US)
        </div>
      </a>
    )
  }

  <div
    class="z-50 hidden my-4 text-base list-none bg-white dark:bg-gray-800 divide-y divide-gray-100 dark:divide-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600"
    id="language-dropdown-menu"
  >
    <ul
      class="py-2 font-medium"
      role="none"
    >
      <li>
        {
          lang === "es" ? (
            <a data-astro-reload
              href="/en"
              class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-colors"
              role="menuitem"
            >
              <div class="inline-flex items-center gap-2">
                <EnglishFlag />
                English (US)
              </div>
            </a>
          ) : (
            <a data-astro-reload
              href="/"
              class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-colors"
              role="menuitem"
            >
              <div class="inline-flex items-center gap-2">
                <SpanishFlag />
                Spanish (ES)
              </div>
            </a>
          )
        }
      </li>
    </ul>
  </div>
</div>
